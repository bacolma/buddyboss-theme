/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(_){_("body").hasClass("reply-edit")||_(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),_(this).hasClass("submitting"))return!1;_(this).addClass("submitting");var i=!0,t=!0,r=_(e.target).find(".bbp-the-content").data("key"),d=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[r]&&(d=window.forums_medium_reply_editor[r]),(0<_(this).find("#bbp_media").length&&0<_(this).find("#bbp_media_gif").length&&""==_(this).find("#bbp_media").val()&&""==_(this).find("#bbp_media_gif").val()||0<_(this).find("#bbp_media").length&&_(this).find("#bbp_media_gif").length<=0&&""==_(this).find("#bbp_media").val()||0<_(this).find("#bbp_media_gif").length&&_(this).find("#bbp_media").length<=0&&""==_(this).find("#bbp_media_gif").val())&&(t=!1),d&&""===_.trim(d.getContent().replace("<p><br></p>",""))&&0==t?(_(this).find(".bbp-the-content").addClass("error"),i=!1):d||""!==_.trim(_(this).find("#bbp_reply_content").val())||0!=t?(d&&_(this).find(".bbp-the-content").removeClass("error"),_(this).find("#bbp_reply_content").removeClass("error")):(_(this).find("#bbp_reply_content").addClass("error"),i=!1),i?function(e,i,t,r){var d={action:e,nonce:i};_.each(t,function(e,i){"action"===i.name?d.bbp_reply_form_action=i.value:d[i.name]=i.value});var h=r.closest("#bbpress-forums");_.post(window.bbpReplyAjaxJS.bbp_ajaxurl,d,function(e){if(e.success){h.find(".bbp-reply-form form").removeClass("submitting");var i="";if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",_("#post-"+e.reply_id).parent("li").replaceWith(i);else if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var t=null,r="1";if(_("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var d=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;t=_("#post-"+e.reply_parent).closest("li.depth-"+d),r=window.bbpReplyAjaxJS.threaded_reply_depth}else t=_("#post-"+e.reply_parent).parent("li"),r=parseInt(t.data("depth"))+1;var o="ul";h.find(".bb-single-reply-list").is("ol")&&(o="ol"),t.find(">"+o+".bbp-threaded-replies").length||t.append("<"+o+' class="bbp-threaded-replies"></'+o+">"),i='<li class="highlight depth-'+r+'" data-depth="'+r+'">'+e.content+"</li>",t.find(">"+o+".bbp-threaded-replies").append(i)}else i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",h.find(".bb-single-reply-list").append(i);if(""!==e.tags){var n=_("body .item-tags"),p=_("body .item-tags ul");"none"===n.css("display")?(n.append(e.tags),n.show()):(p.remove(),n.append(e.tags))}""!=i&&(_("body").animate({scrollTop:_(i).offset().top},500),setTimeout(function(){_(i).removeClass("highlight")},2e3));var a=h.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),l=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[a]&&bp.Nouveau.Media.dropzone_media[a].length){l=!0;for(var s=0;s<bp.Nouveau.Media.dropzone_media[a].length;s++)bp.Nouveau.Media.dropzone_media[a][s].saved=!0}var b=h.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[b]&&window.forums_medium_reply_editor[b].resetContent(),h.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),h.find("#bbp-close-btn").trigger("click"),h.find("#bbp_reply_content").val(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&(l?h.find(".bbp-reply-form form").find("#forums-media-button").trigger("click"):h.find(".bbp-reply-form form").find("#forums-gif-button").trigger("click"));var f=h.find(".scrubberpost");for(var m in f)if(_(f[m]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(m,10)+1,"");break}}else console.log(e),e.content||(e.content=window.bbpReplyAjaxJS.generic_ajax_error),console.log(e.content);h.find(".bbp-reply-form form").removeClass("submitting")})}("reply",window.bbpReplyAjaxJS.reply_nonce,_(this).serializeArray(),_(this)):_(this).removeClass("submitting")})});