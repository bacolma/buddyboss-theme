!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,i){wp.media.model.IconPickerTarget=i(5),wp.media.model.IconPickerFonts=i(4),wp.media.controller.iconPickerMixin=i(3),wp.media.controller.IconPickerFont=i(1),wp.media.controller.IconPickerImg=i(2),wp.media.view.IconPickerBrowser=i(6),wp.media.view.IconPickerSidebar=i(13),wp.media.view.IconPickerFontItem=i(9),wp.media.view.IconPickerFontLibrary=i(10),wp.media.view.IconPickerFontFilter=i(8),wp.media.view.IconPickerFontBrowser=i(7),wp.media.view.IconPickerImgBrowser=i(12),wp.media.view.IconPickerSvgItem=i(14),wp.media.view.MediaFrame.IconPicker=i(11)},function(e,t){var i=wp.media.controller.State.extend(_.extend({},wp.media.controller.iconPickerMixin,{defaults:{multiple:!1,menu:"default",toolbar:"select",baseType:"font"},initialize:function(){var e=this.get("data");this.set("groups",new Backbone.Collection(e.groups)),this.set("library",new wp.media.model.IconPickerFonts(e.items)),this.set("selection",new wp.media.model.Selection(null,{multiple:this.get("multiple")}))},activate:function(){this.frame.on("open",this.updateSelection,this),this.resetFilter(),this.updateSelection()},deactivate:function(){this.frame.off("open",this.updateSelection,this)},resetFilter:function(){this.get("library").props.set("group","all")},updateSelection:function(){var e,t=this.get("selection"),i=this.get("library"),n=this.frame.target,o=n.get("icon"),r=n.get("type");this.id===r&&(e=i.findWhere({id:o})),t.reset(e||null)},getContentView:function(){return new wp.media.view.IconPickerFontBrowser(_.extend({controller:this.frame,model:this,groups:this.get("groups"),collection:this.get("library"),selection:this.get("selection"),baseType:this.get("baseType"),type:this.get("id")},this.ipGetSidebarOptions()))}}));e.exports=i},function(e,t){var i,n=wp.media.controller.Library,o=wp.media.view.l10n,r=wp.media.model,s=wp.media.view;i=n.extend(_.extend({},wp.media.controller.iconPickerMixin,{defaults:_.defaults({id:"image",baseType:"image",syncSelection:!1},n.prototype.defaults),initialize:function(e){var t=this.get("selection");this.options=e,this.set("library",wp.media.query({type:e.data.mimeTypes})),this.routers={upload:{text:o.uploadFilesTitle,priority:20},browse:{text:o.mediaLibraryTitle,priority:40}},t instanceof r.Selection||this.set("selection",new r.Selection(t,{multiple:!1})),n.prototype.initialize.apply(this,arguments)},activate:function(){n.prototype.activate.apply(this,arguments),this.get("library").observe(wp.Uploader.queue),this.frame.on("open",this.updateSelection,this),this.updateSelection()},deactivate:function(){n.prototype.deactivate.apply(this,arguments),this.get("library").unobserve(wp.Uploader.queue),this.frame.off("open",this.updateSelection,this)},getContentView:function(e){var t="upload"===e?this.uploadContent():this.browseContent();return this.frame.$el.removeClass("hide-toolbar"),t},browseContent:function(){var e=_.extend({model:this,controller:this.frame,collection:this.get("library"),selection:this.get("selection"),sortable:this.get("sortable"),search:this.get("searchable"),filters:this.get("filterable"),dragInfo:this.get("dragInfo"),idealColumnWidth:this.get("idealColumnWidth"),suggestedWidth:this.get("suggestedWidth"),suggestedHeight:this.get("suggestedHeight")},this.ipGetSidebarOptions());return"svg"===this.id&&(e.AttachmentView=s.IconPickerSvgItem),new s.IconPickerImgBrowser(e)},uploadContent:function(){return new wp.media.view.UploaderInline({controller:this.frame})},updateSelection:function(){var e,t=this.get("selection"),i=this.frame.target,n=i.get("icon"),o=i.get("type");this.id===o&&(e=r.Attachment.get(n),this.dfd=e.fetch()),t.reset(e||null)},ipGetIconUrl:function(e,t){var i=e.get("url"),n=e.get("sizes");return void 0===t&&(t="thumbnail"),n&&n[t]&&(i=n[t].url),i}})),e.exports=i},function(e,t){var i={ipGetSidebarOptions:function(){var e=this.frame.options,t={};return e.SidebarView&&e.SidebarView.prototype instanceof wp.media.view.IconPickerSidebar?(t.sidebar=!0,t.SidebarView=e.SidebarView):t.sidebar=!1,t},ipGetIconUrl:function(){return""}};e.exports=i},function(e,t){var i=Backbone.Collection.extend({constructor:function(){Backbone.Collection.prototype.constructor.apply(this,arguments),this.items=new Backbone.Collection(this.models),this.props=new Backbone.Model({group:"all",search:""}),this.props.on("change",this.refresh,this)},refresh:function(e){var t=this,i=_.clone(this.items.models);_.each(e.toJSON(),function(e,n){var o=t.filters[n];o&&(i=i.filter(function(t){return o(t,e)}))}),this.reset(i)},filters:{group:function(e,t){return"all"===t||e.get("group")===t||""===e.get("group")},search:function(e,t){return""===t||_.any(["id","name"],function(i){var n=e.get(i);return n&&n.search(t)>=0},t)}}});e.exports=i},function(e,t){var i=Backbone.Model.extend({defaults:{type:"",group:"all",icon:"",url:"",sizes:[]}});e.exports=i},function(e,t){var i={createSidebar:function(){this.sidebar=new this.options.SidebarView({controller:this.controller,selection:this.options.selection}),this.views.add(this.sidebar)}};e.exports=i},function(e,t){var i=wp.media.View.extend(_.extend({className:function(){var e="attachments-browser iconpicker-fonts-browser";return this.options.sidebar||(e+=" hide-sidebar"),e},initialize:function(){this.groups=this.options.groups,this.createToolbar(),this.createLibrary(),this.options.sidebar&&this.createSidebar(),this.remove()},createLibrary:function(){this.items=new wp.media.view.IconPickerFontLibrary({controller:this.controller,collection:this.collection,selection:this.options.selection,baseType:this.options.baseType,type:this.options.type}),this.items.listenTo(this.controller,"attachment:keydown:arrow",this.items.arrowEvent),this.items.listenTo(this.controller,"attachment:details:shift-tab",this.items.restoreFocus),this.views.add(this.items)},createToolbar:function(){this.toolbar=new wp.media.view.Toolbar({controller:this.controller}),this.views.add(this.toolbar),this.toolbar.set("filters",new wp.media.view.IconPickerFontFilter({controller:this.controller,model:this.collection.props,priority:-80}).render()),this.toolbar.set("search",new wp.media.view.Search({controller:this.controller,model:this.collection.props,priority:60}).render())},remove:function(){return!1}},wp.media.view.IconPickerBrowser));e.exports=i},function(e,t){var i=wp.media.view.AttachmentFilters.extend({createFilters:function(){var e=this.controller.state().get("groups"),t={};t.all={text:wp.media.view.l10n.iconPicker.allFilter,props:{group:"all"}},e.each(function(e){t[e.id]={text:e.get("name"),props:{group:e.id}}}),this.filters=t},change:function(){var e=this.filters[this.el.value];e&&this.model.set("group",e.props.group)}});e.exports=i},function(e,t){var i,n=wp.media.view.Attachment.Library;i=n.extend({className:"attachment iconpicker-item",initialize:function(){this.template=wp.media.template("iconpicker-"+this.options.baseType+"-item"),n.prototype.initialize.apply(this,arguments)},render:function(){var e=_.defaults(this.model.toJSON(),{baseType:this.options.baseType,type:this.options.type});return this.views.detach(),this.$el.html(this.template(e)),this.updateSelect(),this.views.render(),this}}),e.exports=i},function(e,t){var i,n=jQuery,o=wp.media.view.Attachments;i=o.extend({className:"attachments iconpicker-items clearfix",initialize:function(){o.prototype.initialize.apply(this,arguments),_.bindAll(this,"scrollToSelected"),_.defer(this.scrollToSelected,this),this.controller.on("open",this.scrollToSelected,this),n(this.options.scrollElement).off("scroll",this.scroll)},_addItem:function(e){this.views.add(this.createAttachmentView(e),{at:this.collection.indexOf(e)})},_removeItem:function(e){var t=this._viewsByCid[e.cid];delete this._viewsByCid[e.cid],t&&t.remove()},render:function(){return _.each(this._viewsByCid,this._removeItem,this),this.collection.each(this._addItem,this),this},createAttachmentView:function(e){var t=new wp.media.view.IconPickerFontItem({controller:this.controller,model:e,collection:this.collection,selection:this.options.selection,baseType:this.options.baseType,type:this.options.type});return this._viewsByCid[t.cid]=t},scrollToSelected:function(){var e,t,i=this.options.selection.single();i&&(e=this.getView(i))&&!this.isInView(e.$el)&&(t=e.$el.offset().top-parseInt(e.$el.css("paddingTop"),10)-this.$el.offset().top+this.$el.scrollTop()-parseInt(this.$el.css("paddingTop"),10),this.$el.scrollTop(t))},getView:function(e){return _.findWhere(this._viewsByCid,{model:e})},isInView:function(e){var t=this.$window.scrollTop(),i=t+this.$window.height(),n=e.offset().top;return n+e.height()<=i&&n>=t},prepare:function(){},ready:function(){},initSortable:function(){},scroll:function(){}}),e.exports=i},function(e,t){var i,n=wp.media.view.l10n,o=wp.media.view.MediaFrame.Select;i=o.extend({initialize:function(){_.defaults(this.options,{title:n.iconPicker.frameTitle,multiple:!1,ipTypes:iconPicker.types,target:null,SidebarView:null}),this.options.target instanceof wp.media.model.IconPickerTarget?this.target=this.options.target:this.target=new wp.media.model.IconPickerTarget,o.prototype.initialize.apply(this,arguments)},createStates:function(){var e;_.each(this.options.ipTypes,function(t){wp.media.controller.hasOwnProperty("IconPicker"+t.controller)&&(e=wp.media.controller["IconPicker"+t.controller],this.states.add(new e({id:t.id,content:t.id,title:t.name,data:t.data})))},this)},bindHandlers:function(){this.on("router:create:browse",this.createRouter,this),this.on("router:render:browse",this.browseRouter,this),this.on("content:render",this.ipRenderContent,this),this.on("toolbar:create:select",this.createSelectToolbar,this),this.on("open",this._ipSetState,this),this.on("select",this._ipUpdateTarget,this)},_ipSetState:function(){var e=this.target.get("type");e&&this.states.findWhere({id:e})||(e=this.states.at(0).id),this.setState(e)},_ipUpdateTarget:function(){var e,t=this.state(),i=t.get("selection").single();e={type:t.id,icon:i.get("id"),sizes:i.get("sizes"),url:t.ipGetIconUrl(i)},this.target.set(e)},browseRouter:function(e){var t=this.state().routers;t&&e.set(t)},ipRenderContent:function(){var e=this.state(),t=this.content.mode(),i=e.getContentView(t);this.content.set(i)}}),e.exports=i},function(e,t){var i=wp.media.view.AttachmentsBrowser.extend(wp.media.view.IconPickerBrowser);e.exports=i},function(e,t){var i=wp.media.view.Sidebar.extend({initialize:function(){var e=this.options.selection;wp.media.view.Sidebar.prototype.initialize.apply(this,arguments),e.on("selection:single",this.createSingle,this),e.on("selection:unsingle",this.disposeSingle,this),e.single()&&this.createSingle()},createSingle:function(){},disposeSingle:function(){}});e.exports=i},function(e,t){var i=wp.media.view.Attachment.Library.extend({template:wp.template("iconpicker-svg-item")});e.exports=i},function(e,t,i){i(0),function(e){var t,i,n,o,r,s,a,c=wp.media.view.l10n.iconPicker,l={};o=function(){return t||(t=new wp.media.view.MediaFrame.IconPicker,t.target.on("change",r)),t},r=function(e){_.each(e.get("inputs"),function(t,i){t.val(e.get(i))}),e.clear({silent:!0}),a.trigger("ipf:update")},s=function(t){var i,n=e(t.currentTarget),o=n.find("a.ipf-select"),r=n.find("a.ipf-remove"),s=n.find("input.ipf-type").val(),a=n.find("input.ipf-icon").val(),p=n.find("input.url").val();if(""===s||""===a||!_.has(iconPicker.types,s))return r.addClass("hidden"),void o.removeClass("has-icon").addClass("button").text(c.selectIcon).attr("title","");i=l[s]?l[s]:l[s]=wp.template("iconpicker-"+iconPicker.types[s].templateId+"-icon"),r.removeClass("hidden"),o.attr("title",c.selectIcon).addClass("has-icon").removeClass("button").html(i({type:s,icon:a,url:p}))},i=function(t){var i=o(),n={inputs:{}};t.preventDefault(),a=e(t.currentTarget).closest(".ipf"),n.id=a.attr("id"),a.find("input").each(function(){var t=e(this),i=t.attr("class").replace("ipf-",""),o=t.val();n[i]=o,n.inputs[i]=t}),i.target.set(n,{silent:!0}),i.open()},n=function(t){var i=e(t.currentTarget).closest("div.ipf");i.find("input").val(""),i.trigger("ipf:update")},e(document).on("click","a.ipf-select",i).on("click","a.ipf-remove",n).on("ipf:update","div.ipf",s),e("div.ipf").trigger("ipf:update")}(jQuery)}]);