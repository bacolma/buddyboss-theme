!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,i){i(2),function(e){var t;menuIcons.activeTypes&&!_.isEmpty(menuIcons.activeTypes)&&(t={templates:{},wrapClass:"div.menu-icons-wrap",frame:null,target:new wp.media.model.IconPickerTarget,typesFilter:function(t){return e.inArray(t.id,menuIcons.activeTypes)>=0},createFrame:function(){t.frame=new wp.media.view.MediaFrame.MenuIcons({target:t.target,ipTypes:_.filter(iconPicker.types,t.typesFilter),SidebarView:wp.media.view.MenuIconsSidebar})},pickIcon:function(e){t.frame.target.set(e,{silent:!0}),t.frame.open()},setUnset:function(i){var n=e(i.currentTarget),a=e(i.target);i.preventDefault(),a.hasClass("_select")||a.hasClass("_icon")?t.setIcon(n):a.hasClass("_remove")&&t.unsetIcon(n)},setIcon:function(i){var n=i.data("id"),a=t.frame,s=a.menuItems,o=s.get(n);if(o)return void t.pickIcon(o.toJSON());o={id:n,$el:i,$title:e("#edit-menu-item-title-"+n),$inputs:{}},i.find("div._settings input").each(function(){var t=e(this),i=t.attr("class").replace("_mi-",""),n=t.val();n||(_.has(menuIcons.menuSettings,i)?n=menuIcons.menuSettings[i]:_.has(menuIcons.settingsFields,i)&&(n=menuIcons.settingsFields[i].default)),o[i]=n,o.$inputs[i]=t}),s.add(o),t.pickIcon(o)},unsetIcon:function(e){var i=e.data("id");e.find("div._settings input").val(""),e.trigger("mi:update"),t.frame.menuItems.remove(i)},updateField:function(i){var n,a=e(i.currentTarget),s=a.find("a._select"),o=a.find("a._remove"),r=a.find("input._mi-type").val(),l=a.find("input._mi-icon").val(),c=a.find("input._mi-url").val();if(""===r||""===l||_.indexOf(menuIcons.activeTypes,r)<0)return s.text(menuIcons.text.select).attr("title",""),void o.addClass("hidden");n=t.templates[r]?t.templates[r]:t.templates[r]=wp.template("menu-icons-item-field-preview-"+iconPicker.types[r].templateId),o.removeClass("hidden"),s.attr("title",menuIcons.text.change),s.html(n({type:r,icon:l,url:c}))},init:function(){t.createFrame(),e(document).on("click",t.wrapClass,t.setUnset).on("mi:update",t.wrapClass,t.updateField),e(t.wrapClass).trigger("mi:update")}},t.init())}(jQuery)},function(e,t){!function(e){e("#menu-icons-settings-tabs").on("click","a.mi-settings-nav-tab",function(t){var i=e(this).blur(),n=e("#"+i.data("type"));t.preventDefault(),t.stopPropagation(),i.parent().addClass("tabs").siblings().removeClass("tabs"),n.removeClass("tabs-panel-inactive").addClass("tabs-panel-active").show().siblings("div.tabs-panel").hide().addClass("tabs-panel-inactive").removeClass("tabs-panel-active")}).find("a.mi-settings-nav-tab").first().click(),e("body").on("click",".menu-icons-settings-save",function(t){var i=e(this).prop("disabled",!0),n=i.siblings("span.spinner");t.preventDefault(),t.stopPropagation(),n.css({display:"inline-block",visibility:"visible"}),e.ajax({type:"POST",url:window.menuIcons.ajaxUrls.update,data:e(".media-sidebar :input").serialize(),success:function(e){e.success&&""!==e.data.redirectUrl?window.location=e.data.redirectUrl:i.prop("disabled",!1),n.hide()},always:function(){n.hide()}})})}(jQuery)},function(e,t,i){wp.media.model.MenuIconsItemSettingField=i(3),wp.media.model.MenuIconsItemSettings=i(4),wp.media.model.MenuIconsItem=i(5),wp.media.view.MenuIconsItemSettingField=i(8),wp.media.view.MenuIconsItemSettings=i(9),wp.media.view.MenuIconsItemPreview=i(7),wp.media.view.MenuIconsSidebar=i(10),wp.media.view.MediaFrame.MenuIcons=i(6)},function(e,t){var i=Backbone.Model.extend({defaults:{id:"",label:"",value:"",type:"text"}});e.exports=i},function(e,t){var i=Backbone.Collection.extend({model:wp.media.model.MenuIconsItemSettingField});e.exports=i},function(e,t){var i=Backbone.Model.extend({initialize:function(){this.on("change",this.updateValues,this)},updateValues:function(){_.each(this.get("$inputs"),function(e,t){e.val(this.get(t))},this),this.get("$el").trigger("mi:update")}});e.exports=i},function(e,t){var i=wp.media.view.MediaFrame.IconPicker.extend({initialize:function(){this.menuItems=new Backbone.Collection([],{model:wp.media.model.MenuIconsItem}),wp.media.view.MediaFrame.IconPicker.prototype.initialize.apply(this,arguments),void 0!==this.setMenuTabPanelAriaAttributes&&void 0!==this.setRouterTabPanelAriaAttributes&&(this.off("open",this.setMenuTabPanelAriaAttributes,this),this.off("open",this.setRouterTabPanelAriaAttributes,this),this.off("content:render",this.setMenuTabPanelAriaAttributes,this),this.off("content:render",this.setRouterTabPanelAriaAttributes,this)),this.listenTo(this.target,"change",this.miUpdateItemProps),this.on("select",this.miClearTarget,this)},miUpdateItemProps:function(e){this.menuItems.get(e.id).set(e.changed)},miClearTarget:function(){this.target.clear({silent:!0})}});e.exports=i},function(e,t){var i=wp.media.View.extend({tagName:"p",className:"mi-preview menu-item attachment-info",events:{"click a":"preventDefault"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),this.model.on("change",this.render,this)},render:function(){var e=this.controller,t=e.state(),i=t.get("selection").single(),n=this.model.toJSON(),a=_.extend(n,{type:t.id,icon:i.id,title:this.model.get("$title").val(),url:t.ipGetIconUrl(i,n.image_size)}),s="menu-icons-item-sidebar-preview-"+iconPicker.types[t.id].templateId+"-";return a.hide_label?s+="hide_label":s+=a.position,this.template=wp.media.template(s),this.$el.html(this.template(a)),this},preventDefault:function(e){e.preventDefault()}});e.exports=i},function(e,t){var i,n=jQuery;i=wp.media.View.extend({tagName:"label",className:"setting",events:{"change :input":"_update"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),this.template=wp.media.template("menu-icons-settings-field-"+this.model.get("type")),this.model.on("change",this.render,this)},prepare:function(){return this.model.toJSON()},_update:function(e){var t=n(e.currentTarget).val();this.model.set("value",t),this.options.item.set(this.model.id,t)}}),e.exports=i},function(e,t){var i=wp.media.view.PriorityList.extend({className:"mi-settings attachment-info",prepare:function(){_.each(this.collection.map(this.createField,this),function(e){this.set(e.model.id,e)},this)},createField:function(e){return new wp.media.view.MenuIconsItemSettingField({item:this.model,model:e,collection:this.collection})}});e.exports=i},function(e,t){var i=wp.media.view.IconPickerSidebar.extend({initialize:function(){var e=new wp.media.View({tagName:"h3",priority:-10});new wp.media.View({tagName:"div",className:"_info",priority:1e3});wp.media.view.IconPickerSidebar.prototype.initialize.apply(this,arguments),e.$el.text(window.menuIcons.text.preview),this.set("title",e),this.$el.append(jQuery("div.buddyboss-menu-icon-settings").html())},createSingle:function(){this.createPreview(),this.createSettings()},disposeSingle:function(){this.unset("preview"),this.unset("settings")},createPreview:function(){var e=this,t=e.controller,i=t.state();if(i.dfd&&"pending"===i.dfd.state())return void i.dfd.done(function(){e.createPreview()});e.set("preview",new wp.media.view.MenuIconsItemPreview({controller:t,model:t.target,priority:80}))},createSettings:function(){var e=this.controller,t=e.state(),i=t.get("data").settingsFields,n=[];_.each(i,function(t){var i,a=window.menuIcons.settingsFields[t];a&&(i=_.defaults({value:e.target.get(t)||a.default},a),n.push(i))}),n.length&&this.set("settings",new wp.media.view.MenuIconsItemSettings({controller:this.controller,collection:new wp.media.model.MenuIconsItemSettings(n),model:e.target,type:this.options.type,priority:120}))}});e.exports=i},function(e,t,i){i(1),i(0)}]);